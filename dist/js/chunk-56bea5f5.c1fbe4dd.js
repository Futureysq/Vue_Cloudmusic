(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56bea5f5"],{3466:function(t,a,s){"use strict";var n=s("1c8b"),e=s("5dfd").findIndex,i=s("258f"),r=s("ff9c"),c="findIndex",o=!0,l=r(c);c in[]&&Array(1)[c]((function(){o=!1})),n({target:"Array",proto:!0,forced:o||!l},{findIndex:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}}),i(c)},5897:function(t,a,s){"use strict";s.r(a);var n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"right"},[t.rankData[t.index1]?s("div",{staticClass:"content"},[s("div",{staticClass:"wrap1"},[s("div",{staticClass:"m-info clearfix"},[s("div",{staticClass:"u-c"},[s("img",{staticClass:"auto-img",attrs:{src:t.rankData[t.index1].coverImgUrl,alt:""}}),s("span",{staticClass:"msk"})]),s("div",{staticClass:"cnt"},[s("div",{staticClass:"cnt-1"},[s("div",{staticClass:"hd"},[s("h2",{staticClass:"ff"},[t._v(t._s(t.rankData[t.index1].name))])]),s("div",{staticClass:"user clearfix"},[s("i",{staticClass:"u-icon"}),s("span",{staticClass:"s-f1"},[t._v("最近更新："+t._s(t.forDate(t.rankData[t.index1].updateTime)))]),s("span",{staticClass:"s-f2"},[t._v("（"+t._s(t.rankData[t.index1].updateFrequency)+"）")])]),s("div",{staticClass:"btn clearfix"},[s("a",{staticClass:"u-btn",attrs:{href:"javascript:;"},on:{click:function(a){return a.stopPropagation(),t.plSongSheet(t.rankListData)}}},[t._m(0)]),s("a",{staticClass:"u-btnt u-bt1",attrs:{href:""}}),s("a",{staticClass:"u-btnt u-bt2",attrs:{href:""}},[s("i",[t._v("("+t._s(t.rankData[t.index1].subscribedCount)+")")])]),t._m(1),t._m(2),t._m(3)])])])])]),s("div",{staticClass:"wrap2"},[s("div",{staticClass:"s-title clearfix"},[t._m(4),s("span",{staticClass:"sub fl"},[s("span",[t._v(t._s(t.rankData[t.index1].trackCount))]),t._v("首歌 ")]),s("div",{staticClass:"more fr"},[t._v(" 播放： "),s("strong",{staticClass:"s-fc"},[t._v(t._s(t.rankData[t.index1].playCount))]),t._v(" 次 ")])]),s("div",{staticClass:"song-list"},[s("div",{staticClass:"s-l"},[s("table",{staticClass:"s-table"},[t._m(5),s("tbody",t._l(t.rankListData,(function(a,n){return s("tr",{key:n},[s("td",[s("div",{staticClass:"hd"},[s("span",{staticClass:"num"},[t._v(t._s(n+1))]),t._m(6,!0)])]),s("td",{},[s("div",{staticClass:"f-cb clearfix"},[s("div",{staticClass:"tt"},[s("a",{attrs:{href:""}},[n<3?s("img",{staticClass:"rpic auto-img",attrs:{src:a.al.picUrl,alt:""}}):t._e()]),t._v(" "+t._s(t.aa)+" "),s("span",{staticClass:"ply1",class:{act:t.songsData&&t.songsData.id===a.id},attrs:{id:a.id},on:{click:function(s){return t.playSong(a.id,a,n)}}}),s("div",{staticClass:"ttc"},[s("span",{staticClass:"txt"},[s("a",{attrs:{href:""}},[s("b",[t._v(t._s(a.name))])])])])])])]),s("td",{staticClass:"s-fc3"},[s("span",{staticClass:"u-dur"},[t._v(t._s(t.formatTime(a.dt)))]),s("div",{staticClass:"opt hshow"},[s("a",{staticClass:"u-icn u-icn-81 icn-add",attrs:{href:"javascript:;"}}),s("span",{staticClass:"icn icn-fav",on:{click:function(s){return t.likeSong(a,a.id)}}}),s("span",{staticClass:"icn icn-share"}),s("span",{staticClass:"icn icn-dl"})])]),s("td",{},[s("div",{staticClass:"text"},[s("span",[s("a",{attrs:{href:""}},[t._v(t._s(a.ar[0].name))])])])])])})),0)])])]),s("div")])]):t._e()])},e=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("i",[s("em",{staticClass:"pl"}),t._v(" 播放 ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("a",{staticClass:"u-btnt u-bt3",attrs:{href:""}},[s("i",[t._v("(8750)")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("a",{staticClass:"u-btnt u-bt4",attrs:{href:""}},[s("i",[t._v("下载")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("a",{staticClass:"u-btnt u-bt5",attrs:{href:""}},[s("i",[s("span",{staticClass:"count"},[t._v("(187621)")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h3",{staticClass:"fl"},[s("span",{staticClass:"f-ff"},[t._v("歌曲列表")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",{staticClass:"first w1"}),s("th",[s("div",{staticClass:"wp"},[t._v("标题")])]),s("th",{staticClass:"w2-1"},[s("div",{staticClass:"wp"},[t._v("时长")])]),s("th",{staticClass:"w3-1"},[s("div",{staticClass:"wp ww"},[t._v("歌手")])])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"rk"},[s("span",{staticClass:"u-icn u-icn-75"})])}],i=(s("3466"),s("9302"),s("77ad"),s("895d"),s("cb07")),r=s("e793"),c=s("9f3a"),o=Object(c["a"])("rankModule"),l=o.mapState,d=o.mapMutations,u={data:function(){return{listIndex:0,index1:0,active:-1,songsUrl:null,songsData:{},playingSong:[],aa:null}},computed:Object(r["a"])({},l(["rankListData","rankData","tesedata","rankHeadData","progressWidth","maskWidth","playSongs","currentSong","likeSongs"])),methods:Object(r["a"])(Object(r["a"])({},d(["getRankListData","getRankData","getRankHeadData","getProgressWidth","getMaskWidth","getPlaySongs","getCurrentSong","getLikeSongs"])),{},{formatTime:function(t){var a=Math.floor(t/1e3%60);a=a>=10?a:"0"+a;var s=Math.floor(t/1e3/60);return s=s>=10?s:"0"+s,s+":"+a},forDate:function(t){var a=new Date(parseInt(t)),s=a.getMonth()+1,n=a.getDate();(Array(2).join(0)+s).slice(-2),(Array(2).join(0)+n).slice(-2)},playSong:function(t,a,s){var n=this;this.songsData=a,this.$store.dispatch("rankModule/getIndex",s),this.axios({method:"GET",url:"http://49.234.68.133:3000/song/url?id="+t}).then((function(s){n.$store.dispatch("rankModule/getSongsUrl",s.data.data[0].url);var e=setTimeout((function(){n.$store.dispatch("rankModule/changeisShow",!1),clearTimeout(e)}),5e3);if(n.$store.dispatch("rankModule/getSongsData",a),n.$store.dispatch("rankModule/getSongsId",t),window.localStorage.setItem("playSong",JSON.stringify(a)),n.$store.commit("rankModule/changeisPlay",!0),n.$store.dispatch("rankModule/changeisShow",!0),n.currentSong.length)for(var i=0;i<n.currentSong.length;i++){var r=n.currentSong[i];if(t==r.id)break;i==n.currentSong.length-1&&n.currentSong.push(a)}else n.currentSong.push(a);if(console.log("this.currentSong",n.currentSong),n.$store.dispatch("rankModule/getCurrentSong",n.currentSong),window.localStorage.setItem("currentSong",JSON.stringify(n.currentSong)),0==n.currentSong.length)n.$store.dispatch("rankModule/getIndex",0);else{var c=n.currentSong.findIndex((function(a){return a.id===t}));-1===c?n.$store.dispatch("rankModule/getIndex",n.currentSong.length):n.$store.dispatch("rankModule/getIndex",c)}})),this.axios({method:"GET",url:"http://49.234.68.133:3000/lyric?id="+t}).then((function(t){n.$store.dispatch("rankModule/getLyric",t.data.lrc.lyric)})).catch((function(t){}))},likeSong:function(t,a){if(this.likeSongs.length)for(var s=0;s<this.likeSongs.length;s++){var n=this.likeSongs[s];if(a==n.id)break;Object(i["a"])({message:"已存在"}),s==this.likeSongs.length-1&&(this.likeSongs.push(t),Object(i["a"])({message:"收藏成功"}))}else this.likeSongs.push(t);this.$store.dispatch("rankModule/getLikeSongs",this.likeSongs),window.localStorage.setItem("likeSongs",JSON.stringify(this.likeSongs))}}),mounted:function(){var t=JSON.parse(window.localStorage.getItem("currentSong"));this.$store.dispatch("rankModule/getCurrentSong",t)},created:function(){var t=this,a=this.$route.params.rankList;this.axios({method:"GET",url:"http://49.234.68.133:3000/playlist/detail?id="+a}).then((function(a){t.$store.dispatch("rankModule/getRankListData",a.data.playlist.tracks)}));this.$route.query.index},beforeRouteUpdate:function(t,a,s){var n=this,e=t.params.rankList,i=t.query.index;this.index1=i,this.axios({method:"GET",url:"http://49.234.68.133:3000/playlist/detail?id="+e}).then((function(t){n.$store.dispatch("rankModule/getRankListData",t.data.playlist.tracks)})),s()}},h=u,g=(s("efbe"),s("9ca4")),f=Object(g["a"])(h,n,e,!1,null,"03aaa51b",null);a["default"]=f.exports},9302:function(t,a,s){"use strict";var n=s("1c8b"),e=s("692f"),i=s("da10"),r=s("d7e1"),c=[].join,o=e!=Object,l=r("join",",");n({target:"Array",proto:!0,forced:o||!l},{join:function(t){return c.call(i(this),void 0===t?",":t)}})},b831:function(t,a,s){},efbe:function(t,a,s){"use strict";var n=s("b831"),e=s.n(n);e.a}}]);
//# sourceMappingURL=chunk-56bea5f5.c1fbe4dd.js.map